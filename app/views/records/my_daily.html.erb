<div class="d-flex flex-column justify-content-center align-items-center">
  <div class="mb-3">
    <h1><%= t('view.my_daily_record') %></h1>
  </div>
  <div class="d-flex flex-row justify-content-center align-items-center">
    <div class="mr-5">
      <%= t('activerecord.attributes.user.protein_target') %>: <%= current_user.protein_target %>g
    </div>
    <div class="ml-5">
      <% @days.each do |day| %>
        <% records = @records.where(record_on: day) %>
        <div class="my-5">
          <% if @records != nil %>
            <table>
              <% records.each do |record| %>
                <% if record == records.first %>
                  <thead>
                    <tr>
                      <th><%= "#{day}"%></th>
                    </tr>
                    <tr>
                      <th><%= t('activerecord.attributes.food.name') %></th>
                      <th><%= t('activerecord.attributes.food.protein') %></th>
                      <th><%= t('activerecord.attributes.food.quantity') %></th>
                      <th><%= t('activerecord.attributes.food.unit') %></th>
                      <th><%= t('activerecord.attributes.record.ate') %></th>
                    </tr>
                  </thead>
                <% end %>
                <tbody>
                  <% protein_amount = 0 %>
                  <% index = 0 %>
                  <% food = Food.find(record.food_id) %>
                  <tr>
                    <td><%= food.name %></td>
                    <td><%= food.protein %></td>
                    <td><%= food.quantity %></td>
                    <td><%= food.unit %></td>
                    <td><%= record.ate %></td>
                    <td><%= link_to t('view.show'), record_path(record.id) %></td>
                    <td><%= link_to t('view.edit'), edit_record_path(record.id) %></td>
                    <td><%= link_to t('view.destroy'), record_path(record.id), method: :delete, data: { confirm: 'Are you sure?' } %></td>
                  </tr>
                  <% protein_amount += (food.protein * record.ate) %>
                  <% if record == records.last %>
                    <tr><td><%= t('view.my_daily_amount_protein') %><%= protein_amount %><%= "g" %></td></tr>
                    <% protein_amount = 0 %>
                  <% end %>
                </tbody>
              <% end %>
            </table>
          <% end %>
        </div>
      <% end %>
    <div>
  <div>
<div>