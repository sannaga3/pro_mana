<!DOCTYPE html>
<html>
  <head>
    <title>ProMana</title>
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track': 'reload' %>
    <%= javascript_include_tag 'application', 'data-turbolinks-track': 'reload' %>
    <meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=2.0,user-scalable=yes">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Sawarabi+Gothic&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script>
  </head>

  <body>
    <% if controller_name  != "top" %>
      <div class='body_wrapper'>
        <nav class="navbar navbar-expand-md navbar-light nav_color">
          <a class="navbar-brand">
            <%= link_to 'ロゴ', "/", class: "navbar-brand logo" %>
          </a>
          <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#responsiveMenu" aria-controls="responsiveMenu" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse justify-content-around" id="responsiveMenu">
            <% if user_signed_in? %>
              <ul class="navbar-nav mr-auto">
                <li class="nav-link">
                  <span class="px-2"><%= t('view.user_name') %>: </span><%= current_user.name %>
                  <%= "admin" if current_user.admin == true %>
                </li>
              </ul>
              <ul class="navbar-nav navbar-right">
                <li class="nav-item"><%= link_to t('view.profile'), user_path(current_user.id), class: "px-2 nav-link" %></li>
                <li class="nav-item"><%= link_to t('view.food_new'), new_food_path, class: "px-2 nav-link" %></li>
                <li class="nav-item"><%= link_to t('view.foods_index'), foods_path, class: "px-2 nav-link" %></li>
                <li class="nav-item"><%= link_to t('view.record_new'), new_record_path, class: "px-2 nav-link" %></li>
                <li class="nav-item"><%= link_to t('view.my_daily_record'), my_daily_records_path, class: "px-2 nav-link" %></li>
                <li class="nav-item"><%= link_to t('view.records_index'), records_path, class: "px-2 nav-link" %></li>
                <li class="nav-item"><%= link_to t('view.follow'), users_path, class: "px-2 nav-link" %></li>
                <li class="nav-item"><%= link_to t('view.logout'), destroy_user_session_path, method: :delete, class: "px-2 nav-link" %></li>
              </ul>
            <% else %>
              <ul class="navbar-nav navbar-left">
                <%= link_to t('view.admin_guest_login'), users_admin_guest_sign_in_path, method: :post, class: "px-2 mb-3 nav-link", id: "admin_guest_login"%>
                <%= link_to t('view.guest_login'), users_guest_sign_in_path, method: :post, class: "login px-2 mb-3 nav-link", id: "guest-login" %>
                <%= link_to t('view.sign_up'), new_user_registration_path, class: "px-2 nav-link mb-3" %>
                <%= link_to t('view.login'), new_user_session_path, class: "px-2 nav-link mb-3" %>
              </ul>
            <% end %>
          </div>
        </nav>
        <div class="grass_header"></div>
        <div class="d-flex flex-column justify-content-center align-items-center contents_wrapper">
            <div class="mt-3">
              <% if notice %>
                <p class="alert-success notice text-center"><%= notice %></p>
              <% end %>
              <% if alert %>
                <p class="alert-danger alert text-center"><%= alert %></p>
              <% end %>
            </div>
            <div class="d-flex flex-row justify-content-center align-items-center" >
              <%= yield %>
            </div>
          </div>
      </div>
      <div class="grass_footer"></div>
      <footer>
        <div class="card-footer text-black-50">&copy; tetsuya</div>
      </footer>
    <% else %>
      <div class="top_image">
        <%= yield %>
      </div>
    <% end %>
  </body>
</html>